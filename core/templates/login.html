<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<title>用户登录-Doujinshi</title>
		<script type="text/javascript">
			{% for message in get_flashed_messages() %}
			window.alert("{{message}}") 
			{% endfor %}
		</script>
		<style>
			#root {
				background-image: url("{{url_for('static',filename='background.jpg')}}") !important;
			}
		</style>
		<link rel="shortcut icon" href="/static/shortcut.png" type="image/x-icon" />
		<link rel="stylesheet" type="text/css" href="/static/css/index.css">
		<link rel="stylesheet" type="text/css" href="../static/css/submit.css" />
	</head>
	<body>
		<div id="root">
			<div id="main">
				<form method="post">
					<fieldset>
						<legend>LogIn</legend>
						<ul>
							<li><label>账户:</label><input type="text" name="account" data-valid="isNonEmpty"
									onkeyup="cheak()" pattern="[a-zA-Z0-9_]+" /></li>
							<li><label>密码:</label><input type="password" name="password" data-valid="isNonEmpty"
									onkeyup="cheak()" pattern="[a-zA-Z0-9]+" /></li>
							<li></li>
							<li></li>
							<li></li>
							<li><input class="disabled" type="submit" value="登录" disabled /></li>
							<li>
								<hr />
							</li>
							<script type="text/javascript">
								const account = document.getElementsByTagName("input")[0];
								const password = document.getElementsByTagName("input")[1];
								const submit = document.querySelector("input[type='submit']");
								const cheak = () => {
									if (account.value.toString() == "admin") {
										enable();
										return
									}
									a = account.value.toString().length;
									p = password.value.toString().length;
									if (a < 4 || a > 10) {
										disable();
										return
									}
									if (p < 6 || p > 20) {
										disable();
										return
									}
									enable();
								}
								const disable = () => {
									submit.setAttribute("disabled", '')
									submit.className = 'disabled'
								}
								const enable = () => {
									submit.removeAttribute("disabled")
									submit.className = ''
								}
							</script>
							<li><a href="{{signup}}">去注册</a></li>
						</ul>
					</fieldset>
				</form>
			</div>
		</div>
	</body>
</html>